# syntax=docker/dockerfile:1.7

FROM node:20-alpine AS dev
WORKDIR /app
ENV NODE_ENV=development

RUN apk add --no-cache tini bash

COPY package.json package-lock.json* ./
RUN --mount=type=cache,target=/root/.npm npm install

COPY . .

ENTRYPOINT ["/sbin/tini", "--"]
CMD ["npm", "run", "dev"]

EXPOSE 3000
