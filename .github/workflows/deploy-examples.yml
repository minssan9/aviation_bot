# This file contains example deployment workflows for various platforms
# Uncomment and adapt the relevant section for your deployment target

name: Deploy Examples (Disabled)

on:
  workflow_dispatch:

jobs:
  # ============================================
  # Example 1: AWS EC2 Deployment
  # ============================================
  deploy-aws-ec2:
    if: false  # Set to true to enable
    name: Deploy to AWS EC2
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to EC2
        uses: appleboy/ssh-action@v1.0.3
        with:
          host: ${{ secrets.AWS_EC2_HOST }}
          username: ec2-user
          key: ${{ secrets.AWS_EC2_SSH_KEY }}
          script: |
            cd /home/ec2-user/aviation_bot
            git pull origin main
            docker compose up -d --build

  # ============================================
  # Example 2: DigitalOcean Droplet
  # ============================================
  deploy-digitalocean:
    if: false  # Set to true to enable
    name: Deploy to DigitalOcean
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to Droplet
        uses: appleboy/ssh-action@v1.0.3
        with:
          host: ${{ secrets.DO_DROPLET_IP }}
          username: root
          key: ${{ secrets.DO_SSH_KEY }}
          script: |
            cd /opt/aviation_bot
            git pull origin main
            docker compose up -d --build --force-recreate

  # ============================================
  # Example 3: Heroku Container Deployment
  # ============================================
  deploy-heroku:
    if: false  # Set to true to enable
    name: Deploy to Heroku
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Deploy to Heroku
        uses: akhileshns/heroku-deploy@v3.13.15
        with:
          heroku_api_key: ${{ secrets.HEROKU_API_KEY }}
          heroku_app_name: ${{ secrets.HEROKU_APP_NAME }}
          heroku_email: ${{ secrets.HEROKU_EMAIL }}
          usedocker: true

  # ============================================
  # Example 4: Google Cloud Run
  # ============================================
  deploy-gcp-cloud-run:
    if: false  # Set to true to enable
    name: Deploy to Google Cloud Run
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Authenticate to Google Cloud
        uses: google-github-actions/auth@v2
        with:
          credentials_json: ${{ secrets.GCP_SA_KEY }}

      - name: Setup Cloud SDK
        uses: google-github-actions/setup-gcloud@v2

      - name: Build and Push to GCR
        run: |
          gcloud builds submit --tag gcr.io/${{ secrets.GCP_PROJECT_ID }}/aviation-bot

      - name: Deploy to Cloud Run
        run: |
          gcloud run deploy aviation-bot \
            --image gcr.io/${{ secrets.GCP_PROJECT_ID }}/aviation-bot \
            --platform managed \
            --region us-central1 \
            --set-env-vars "BOT_TOKEN=${{ secrets.BOT_TOKEN }}" \
            --set-env-vars "GEMINI_API_KEY=${{ secrets.GEMINI_API_KEY }}" \
            --allow-unauthenticated

  # ============================================
  # Example 5: Azure Container Instances
  # ============================================
  deploy-azure:
    if: false  # Set to true to enable
    name: Deploy to Azure
    runs-on: ubuntu-latest
    steps:
      - name: Login to Azure
        uses: azure/login@v1
        with:
          creds: ${{ secrets.AZURE_CREDENTIALS }}

      - name: Deploy to Azure Container Instances
        uses: azure/aci-deploy@v1
        with:
          resource-group: ${{ secrets.AZURE_RESOURCE_GROUP }}
          dns-name-label: aviation-bot
          image: ghcr.io/${{ github.repository }}:latest
          name: aviation-bot
          location: eastus
          environment-variables: |
            BOT_TOKEN=${{ secrets.BOT_TOKEN }}
            GEMINI_API_KEY=${{ secrets.GEMINI_API_KEY }}

  # ============================================
  # Example 6: Railway.app
  # ============================================
  deploy-railway:
    if: false  # Set to true to enable
    name: Deploy to Railway
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Deploy to Railway
        uses: bervProject/railway-deploy@main
        with:
          railway_token: ${{ secrets.RAILWAY_TOKEN }}
          service: aviation-bot

  # ============================================
  # Example 7: Render.com
  # ============================================
  deploy-render:
    if: false  # Set to true to enable
    name: Deploy to Render
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Render Deployment
        run: |
          curl -X POST ${{ secrets.RENDER_DEPLOY_HOOK_URL }}

  # ============================================
  # Example 8: Kubernetes Cluster
  # ============================================
  deploy-kubernetes:
    if: false  # Set to true to enable
    name: Deploy to Kubernetes
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Configure kubectl
        uses: azure/k8s-set-context@v3
        with:
          kubeconfig: ${{ secrets.KUBE_CONFIG }}

      - name: Deploy to Kubernetes
        run: |
          kubectl set image deployment/aviation-bot \
            aviation-bot=ghcr.io/${{ github.repository }}:${{ github.sha }}
          kubectl rollout status deployment/aviation-bot

  # ============================================
  # Example 9: VPS with Docker Swarm
  # ============================================
  deploy-docker-swarm:
    if: false  # Set to true to enable
    name: Deploy to Docker Swarm
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to Swarm
        uses: appleboy/ssh-action@v1.0.3
        with:
          host: ${{ secrets.SWARM_MANAGER_HOST }}
          username: ${{ secrets.SWARM_USER }}
          key: ${{ secrets.SWARM_SSH_KEY }}
          script: |
            docker service update \
              --image ghcr.io/${{ github.repository }}:latest \
              aviation-bot

  # ============================================
  # Example 10: Fly.io
  # ============================================
  deploy-fly:
    if: false  # Set to true to enable
    name: Deploy to Fly.io
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Flyctl
        uses: superfly/flyctl-actions/setup-flyctl@master

      - name: Deploy to Fly.io
        run: flyctl deploy --remote-only
        env:
          FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}
